<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@100..900&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap" rel="stylesheet">
    <link rel="icon" href="imagenes/icons8-cumpleaños-16.ico">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
    <link rel="stylesheet" href="styles.css">
    <title>Presupuestos</title>
</head>
<body class="bg-azul-600">

<header class="mb-5">
    <nav class="navbar navbar-expand-sm">
        <div class="container-fluid bg-azul-600 altura-50 fixed-top">
            <a class="navbar-brand" href="index.html">Mundo Mágico</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item text-start">
                        <a class="nav-link active text-white" aria-current="page" href="index.html">Inicio</a>
                    </li>

                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton1" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
                            Info
                        </button>
                        <ul class="dropdown-menu dropdown-menu-dark " aria-labelledby="dropdownMenuButton1">
                            <li><a class="dropdown-item" href="contacto.html">Contacto</a></li>
                            <li><a class="dropdown-item" href="institucional.html">Institucional</a></li>
                        </ul>
                    </div>

                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton2" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
                            Menú
                        </button>
                        <ul class="dropdown-menu dropdown-menu-dark" aria-labelledby="dropdownMenuButton2">
                            <li><a class="dropdown-item" href="salones.html">Salones de Evento</a></li>
                            <li><a class="dropdown-item" href="servicios.html">Servicios</a></li>
                        </ul>
                    </div>

                    <div class="dropdown dropdown-final">
                        <button class="btn btn-secondary dropdown-toggle" type="button" id="dropdownMenuButton3" data-bs-toggle="dropdown" aria-expanded="false" data-bs-auto-close="outside">
                            Cuenta
                        </button>
                        <ul class="dropdown-menu dropdown-menu-dark " aria-labelledby="dropdownMenuButton3">
                            <li><a class="dropdown-item" href="iniciarsesion.html">Iniciar Sesión</a></li>
                        </ul>
                    </div>
                </ul>
            </div>
        </div>
    </nav>
</header>

<div class="container mt-5 pt-5">
    <h1 class="text-center mb-3 text-white">Presupuestos</h1>
    <div class="row justify-content-center mb-4">
        <div class="col-md-7">

            <table class="table table-bordered align-middle" id="tablaPresupuesto">

                <thead class="table-primary">
                    <tr>
                        <th>Servicios</th>
                        <th style="width: 100px;">Precio</th>
                        <th style="width: 100px;">Seleccionar</th>
                    </tr>
                </thead>

                <tbody>
                    <tr>
                        <td id="salonNombre">Salón seleccionado</td>
                        <td id="precioSalonPresupuesto">$0</td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Cantidad de horas</td>
                        <td id="precioSalonPresupuesto"><input type="number" id="cantidadHoras" class="form-control servicio " value="1" min="1" style="width: 100px;"></td>
                        <td></td>
                    </tr>
                    <tr>
                        <td>Decoración con globos</td>
                        <td>$5000</td>
                        <td class="text-center"><input type="checkbox" class="servicio" value="1"></td>
                    </tr>
                    <tr>
                        <td>Candybar</td>
                        <td>$10000</td>
                        <td class="text-center"><input id="cantidadHorasPresupuesto" type="checkbox" class="servicio" value=""></td>
                    </tr>
                    <tr>
                        <td>Invitaciones digitales</td>
                        <td>$8000</td>
                        <td class="text-center"><input type="checkbox" class="servicio" value="1"></td>
                    </tr>
                    <tr>
                        <td>Maquillaje Artístico</td>
                        <td>$10000</td>
                        <td class="text-center"><input type="checkbox" class="servicio" value="4"></td>
                    </tr>
                    <tr>
                        <td>Catering</td>
                        <td>$20000</td>
                        <td class="text-center"><input type="checkbox" class="servicio" value="2"></td>
                    </tr>
                    <tr>
                        <td>Torta y Mesa dulce</td>
                        <td>$15000</td>
                        <td class="text-center"><input type="checkbox" class="servicio" value="3"></td>
                    </tr>
                    <tr>
                        <td>Espectáculo</td>
                        <td>$20000</td>
                        <td class="text-center"><input type="checkbox" class="servicio" value="3"></td>
                    </tr>
                    <tr>
                        <td>Fotografía y Video</td>
                        <td>$10000</td>
                        <td class="text-center"><input type="checkbox" class="servicio" value="1"></td>
                    </tr>
                </tbody>

                <tfoot>
                    <tr class="table-secondary">
                        <th>Total</th>
                        <th id="totalPresupuesto">$0</th>
                        <th></th>
                    </tr>
                </tfoot>
            </table>

        </div>
        <div class="col-md-5" id="columnaFormulario" style="display: block;">
            <h3 style="color: white;">Datos del solicitante</h3>

            <form>
                <div class="mb-2">
                    <input type="text" class="form-control" placeholder="Nombre completo" required>
                </div>
                <div class="mb-2">
                    <input type="text" class="form-control" placeholder="DNI (sin puntos)" required>
                </div>
                <div class="mb-2">
                    <input type="email" class="form-control" placeholder="Correo electrónico" required>
                </div>
                <div class="mb-2">
                    <input type="tel" class="form-control" placeholder="Teléfono" required>
                </div>
            </form>
            
            <form>
                <div class="mb-2" style="color: white;">
                    Nombre de cumpleañero/cumpleañera: <input type="text" class="form-control" placeholder="Nombre" required>
                </div>
                <div class="mb-2" style="color: white;">
                    Fecha del evento: <input type="date" class="form-control" placeholder="Fecha del Evento" required>
                </div>

                <button type="submit" class="btn color bg-rosaindex">Enviar solicitud</button>
            </form>

        </div>
    </div>
</div>

    <footer class="bg-azul-600 text-light py-4">
        <div class="container-fluid">
            <div class="row">
                <div class="col-md-6 col-lg-4 mb-4">
                    <h5 class="fw-bold border-bottom pb-2 mb-3">CONTACTO</h5>
        
                    <p class="d-flex align-items-center mb-2">
                        <img src="https://img.icons8.com/color/48/000000/whatsapp--v1.png" alt="WhatsApp" alt="WhatsApp" class="me-2" width="15" style="filter: brightness(0) invert(1);">
                        <a href="https://wa.me/222444668800" class="text-light text-decoration-none">+222444668800</a>
                        <span class="ms-2 small">Sólo mensajes por WhatsApp.</span>
                    </p>

                    <p class="d-flex align-items-center mb-2">
                        <img src="https://img.icons8.com/color/48/000000/new-post.png" alt="Email" class="me-2" width="15" style="filter: brightness(0) invert(1);">
                        <strong class="me-1">Email:</strong>
                        <a href="mailto:reservamundomagico@gmail.com" class="text-light text-decoration-none">reservamundomagico@gmail.com</a>
                    </p>

                    <p class="d-flex align-items-center mb-2">
                        <img src="https://img.icons8.com/color/50/000000/marker.png" alt="Ubicación" class="me-2" width="15" style="filter: brightness(0) invert(1);">
                        Monseñor Tavella 1424. Concordia, Entre Ríos. CP: 3200.
                    </p>
                </div>
            </div>

    <div class="row">
        <div class="col-12 text-center mt-4">
        <p class="mb-1">©2025 Mundo Mágico. Todos los derechos reservados.</p>
        <small class="text-muted">Página desarrollada por IDW S.A - Grupo 33</small>
        </div>
    </div>
    </div>
    </footer>
    
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js" integrity="sha384-j1CDi7MgGQ12Z7Qab0qlWQ/Qqz24Gc6BM0thvEMVjHnfYGF0rmFCozFSxQBxwHKO" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    const params = new URLSearchParams(window.location.search);
    const nombreSalon = params.get('nombreSalon');
    const precioSalon = params.get('precioSalon');

    if (nombreSalon && precioSalon) {
        document.getElementById('salonNombre').textContent = nombreSalon;
        document.getElementById('precioSalonPresupuesto').textContent = `$${precioSalon}`;
    }
});
document.addEventListener('DOMContentLoaded', function() {
    const precios = [
        5000,
        10000,
        8000,
        10000,
        20000,
        15000,
        20000,
        10000 
    ];
    const checkboxes = document.querySelectorAll('input[type="checkbox"].servicio');
    const totalPresupuesto = document.getElementById('totalPresupuesto');
    const cantidadHorasInput = document.getElementById('cantidadHoras');

    const params = new URLSearchParams(window.location.search);
    const precioSalon = parseInt(params.get('precioSalon')) || 0;

    function actualizarTotal() {
        let total = 0;
        checkboxes.forEach((checkbox, i) => {
            if (checkbox !== cantidadHorasInput && checkbox.checked) {
                total += precios[i];
            }
        });
        const cantidadHoras = parseInt(cantidadHorasInput.value) || 1;
        totalPresupuesto.textContent = `$${(precioSalon * cantidadHoras) + total}`;
    }
    checkboxes.forEach(checkb => checkb.addEventListener('change', actualizarTotal));
    cantidadHorasInput.addEventListener('input', actualizarTotal);

    actualizarTotal();
});
document.addEventListener('DOMContentLoaded', function() {
    const buttonEnviar = document.querySelector('#columnaFormulario button[type="submit"]');
    if (!buttonEnviar) return;

    buttonEnviar.addEventListener('click', function(e) {
        e.preventDefault();
        const inputCliente = document.querySelectorAll('#columnaFormulario form:nth-of-type(1) input');
        const clienteNombre = inputCliente[0].value.trim();
        const clienteDni = inputCliente[1].value.trim();
        const clienteEmail = inputCliente[2].value.trim();
        const clienteTel = inputCliente[3].value.trim();

        const inputCumple = document.querySelectorAll('#columnaFormulario form:nth-of-type(2) input');
        const cumpleNombre = inputCumple[0].value.trim();
        const cumpleFecha = inputCumple[1].value.trim();

        const salon = document.getElementById('salonNombre').textContent;
        const horas = document.getElementById('cantidadHoras').value;

        const serviciosNombres = [
            "Decoración con globos",
            "Candybar",
            "Invitaciones digitales",
            "Maquillaje Artístico",
            "Catering",
            "Torta y Mesa dulce",
            "Espectáculo",
            "Fotografía y Video"
        ];
        
        const checkboxes = document.querySelectorAll('input[type="checkbox"].servicio');
        let serviciosElegidos = [];
        checkboxes.forEach((cb, i) => {
            if(cb.checked) serviciosElegidos.push(serviciosNombres[i]);
        });

        const total = document.getElementById('totalPresupuesto').textContent;

        const { jsPDF } = window.jspdf;
        const doc = new jsPDF();
        doc.setFillColor(44, 62, 80);
        doc.rect(0, 0, 210, 25, 'F');
        doc.setDrawColor(218, 155, 185);
        doc.setLineWidth(2);
        doc.line(0, 26, 210, 26);

        doc.setTextColor(255, 255, 255);
        doc.setFontSize(20);
        doc.text("Mundo Mágico", 105, 15, { align: "center" });
        doc.setTextColor(0, 0, 0);
        doc.setFontSize(16);
        doc.text("Presupuesto Mundo Mágico", 10, 40);

        doc.setFontSize(12);
        doc.text("Datos del Cliente:", 10, 48);
        doc.text(`Nombre: ${clienteNombre}`, 10, 56);
        doc.text(`DNI: ${clienteDni}`, 10, 64);
        doc.text(`Email: ${clienteEmail}`, 10, 72);
        doc.text(`Teléfono: ${clienteTel}`, 10, 80);
        doc.text("Datos del Cumpleañero/a:", 10, 92);
        doc.text(`Nombre: ${cumpleNombre}`, 10, 100);
        doc.text(`Fecha del evento: ${cumpleFecha}`, 10, 108);
        doc.text("Salón y Horas:", 10, 120);
        doc.text(`Salón: ${salon}`, 10, 128);
        doc.text(`Cantidad de horas: ${horas}`, 10, 136);

        doc.text("Servicios Elegidos:", 10, 148);
        let y = 156;
        if(serviciosElegidos.length === 0) {
            doc.text("Ninguno", 10, y);
            y += 8;
        } else {
            serviciosElegidos.forEach(servicio => {
                doc.text(`- ${servicio}`, 10, y);
                y += 8;
            });
        }
        doc.text(`Total: ${total}`, 10, y + 8);
        doc.save("presupuestoMundoMagico.pdf");
    });
});
</script>

</body>
</html>